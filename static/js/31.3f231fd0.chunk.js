"use strict";(self.webpackChunkhealth_monitor=self.webpackChunkhealth_monitor||[]).push([[31],{31:(e,t,l)=>{l.r(t),l.d(t,{default:()=>h});var i=l(9379),n=l(5043),r=l(3216),a=l(1036),o=l(8772),s=l(379),m=l(9283),u=l(9095),c=l(2952);const d={cont:"SleepPage_cont__oT8Gs",leftSideCont:"SleepPage_leftSideCont__Q3HmQ",rightSideCont:"SleepPage_rightSideCont__ykrwn",rightSideUpCont:"SleepPage_rightSideUpCont__nUzva",title:"SleepPage_title__K9yPp",graphCont:"SleepPage_graphCont__zsvaV",rightSideContTitle:"SleepPage_rightSideContTitle__U5w9+",rightSideDate:"SleepPage_rightSideDate__IODHw",dateWrapper:"SleepPage_dateWrapper__dHRbg",paramInput:"SleepPage_paramInput__iX7O3",fromToCont:"SleepPage_fromToCont__IbmMk",fromToTitle:"SleepPage_fromToTitle__q+7uz",from:"SleepPage_from__oIAUQ",to:"SleepPage_to__4PxPX",rem:"SleepPage_rem__8xRTe",lineRowCont:"SleepPage_lineRowCont__I0Gdh",lineRow:"SleepPage_lineRow__1PnEF",timeInputGroup:"SleepPage_timeInputGroup__JaH6e",removeBtn:"SleepPage_removeBtn__apcvC",dash:"SleepPage_dash__NFLyC",timeInput:"SleepPage_timeInput__p9RMX",twoDots:"SleepPage_twoDots__wLyFl",ampmSelect:"SleepPage_ampmSelect__mwOC4",addSleepCont:"SleepPage_addSleepCont__iDnBy",addBtn:"SleepPage_addBtn__3yzVd",saveBtn:"SleepPage_saveBtn__WPyMK",adviceCont:"SleepPage_adviceCont__JvZ8D",navBtn:"SleepPage_navBtn__y6p-p"};var p=l(579);const h=function(){var e;const t=(0,r.Zp)(),{user:l,privateDispatch:h}=(0,u.d)(),g=0!==(null===l||void 0===l?void 0:l.age)&&0!==(null===l||void 0===l?void 0:l.height)&&0!==(null===l||void 0===l?void 0:l.weight)&&0!==(null===l||void 0===l?void 0:l.desiredWeight),f=null!==(e=null===l||void 0===l?void 0:l.age)&&void 0!==e?e:0,v=(0,n.useMemo)(()=>(null===l||void 0===l?void 0:l.sleep)||[],[null===l||void 0===l?void 0:l.sleep]),S=g?(0,o.A)(f):0,[_,P]=(0,n.useState)((new Date).toISOString().split("T")[0]),x=(0,n.useMemo)(()=>new Date,[]),N="".concat(x.getFullYear(),"-").concat(String(x.getMonth()+1).padStart(2,"0"),"-").concat(String(x.getDate()).padStart(2,"0")),M=_===N,A=(0,n.useMemo)(()=>v.length>0?[...v]:[{date:x,interval:[{fromHour:"00",fromMinute:"00",fromAmPm:"AM",tillHour:"00",tillMinute:"00",tillAmPm:"AM"}]}],[v,x]),j=A.find(e=>new Date(e.date).toISOString().split("T")[0]===_),[C,H]=(0,n.useState)([{fromHour:"00",fromMinute:"00",fromAmPm:"AM",tillHour:"00",tillMinute:"00",tillAmPm:"AM"}]);(0,n.useEffect)(()=>{if(j){const e=[...j.interval].sort((e,t)=>D(e.fromHour,e.fromMinute,e.fromAmPm)-D(t.fromHour,t.fromMinute,t.fromAmPm));H(e)}},[j]),(0,n.useEffect)(()=>{const e=A.find(e=>new Date(e.date).toISOString().split("T")[0]===_);if(e){const t=[...e.interval].sort((e,t)=>D(e.fromHour,e.fromMinute,e.fromAmPm)-D(t.fromHour,t.fromMinute,t.fromAmPm));H(t)}else H([{fromHour:"00",fromMinute:"00",fromAmPm:"AM",tillHour:"00",tillMinute:"00",tillAmPm:"AM"}])},[_,v,A]);const b=null===C||void 0===C?void 0:C.reduce((e,t)=>e+=(0,s.A)(t.fromHour,t.fromMinute,t.fromAmPm,t.tillHour,t.tillMinute,t.tillAmPm),0),y=C[C.length-1],w=(I=y,Number(String(I.fromHour).trim())+Number(String(I.fromMinute).trim())+Number(String(I.tillHour).trim())+Number(String(I.tillMinute).trim())===0&&"AM"===String(I.fromAmPm).trim().toUpperCase()&&"AM"===String(I.tillAmPm).trim().toUpperCase());var I;const T=e=>String(e).padStart(2,"0");function D(e,t,l){let i=parseInt(e,10)%12;return"PM"===l&&(i+=12),60*i+parseInt(t,10)}const B=(e,t,l)=>{let n=parseInt(l,10);["fromHour","tillHour"].includes(t)&&((isNaN(n)||n<0)&&(n=0),n>11&&(n=11),l=T(n)),["fromMinute","tillMinute"].includes(t)&&((isNaN(n)||n<0)&&(n=0),n>59&&(n=59),l=T(n));const r=[...C],o=(0,i.A)((0,i.A)({},r[e]),{},{[t]:l});!function(e,t,l){const i=D(e.fromHour,e.fromMinute,e.fromAmPm),n=D(e.tillHour,e.tillMinute,e.tillAmPm);for(let r=0;r<t.length;r++){if(r===l)continue;const e=t[r],a=D(e.fromHour,e.fromMinute,e.fromAmPm);if(i<D(e.tillHour,e.tillMinute,e.tillAmPm)&&n>a)return!0}return!1}(o,r,e)?(r[e]=o,H(r)):a.oR.error("Intervalele de somn nu trebuie s\u0103 se suprapun\u0103!")};return(0,p.jsxs)("div",{className:d.cont,children:[(0,p.jsxs)("div",{className:d.leftSideCont,children:[(0,p.jsxs)("div",{className:d.rightSideUpCont,children:[(0,p.jsx)("h1",{className:d.title,children:"Sleep statistics"}),(0,p.jsx)("div",{className:d.graphCont,children:"Graphic container"})]}),(0,p.jsxs)("div",{className:d.adviceCont,children:[(0,p.jsx)("h2",{className:d.adviceTitle,children:"Total sleep hours"}),0!==b?(0,p.jsxs)("p",{style:{fontSize:"clamp(11px, 1.5vw, 14px)",color:b<.6*S||b>1.2*S?"red":void 0},className:d.advicep,children:[(0,p.jsxs)("span",{children:["You have ",b," ",1===b?"hour":"hours"," of sleep for"," "]})," ",(0,p.jsx)("span",{style:{marginLeft:"2px"},children:M?"today":(0,m.A)(_)})]}):(0,p.jsxs)("p",{style:{color:"red"},className:d.advicep,children:["No sleep records for"," ",M?"today":(0,m.A)(_)]})]})]}),(0,p.jsxs)("div",{className:d.rightSideCont,children:[(0,p.jsxs)("div",{className:d.rightSideUpCont,children:[(0,p.jsx)("h1",{className:d.title,children:"Add sleep"}),(0,p.jsxs)("div",{className:d.rightSideDate,children:[(0,p.jsx)("div",{className:d.dateWrapper,children:(0,p.jsx)("input",{max:N,type:"date",value:null!==_&&void 0!==_?_:N,onChange:e=>P(e.target.value),className:d.paramInput})}),(0,p.jsx)("p",{className:d.rightSideDateP,children:"Choose date"})]}),(0,p.jsxs)("div",{className:d.fromToCont,children:[(0,p.jsxs)("div",{className:d.fromToTitle,children:[(0,p.jsx)("p",{className:d.from,children:"From"}),(0,p.jsx)("p",{className:d.rem,children:A.length>1?"Delete":"Reset"}),(0,p.jsx)("p",{className:d.to,children:"Till"})]}),(0,p.jsx)("div",{className:d.lineRowCont,children:C.map((e,t)=>(0,p.jsxs)("div",{className:d.lineRow,children:[(0,p.jsxs)("div",{className:d.timeInputGroup,children:[(0,p.jsx)("input",{type:"number",min:"0",max:"11",step:"1",value:e.fromHour,onChange:e=>B(t,"fromHour",e.target.value),className:d.timeInput}),(0,p.jsx)("span",{className:d.twoDots,children:":"}),(0,p.jsx)("input",{type:"number",min:"0",max:"55",step:"1",value:e.fromMinute,onChange:e=>B(t,"fromMinute",e.target.value),className:d.timeInput}),(0,p.jsxs)("select",{value:e.fromAmPm,onChange:e=>B(t,"fromAmPm",e.target.value),className:d.ampmSelect,children:[(0,p.jsx)("option",{value:"AM",children:"AM"}),(0,p.jsx)("option",{value:"PM",children:"PM"})]})]}),C.length>1?(0,p.jsx)("button",{type:"button",onClick:()=>(e=>{const t=C.filter((t,l)=>l!==e);H(t)})(t),className:d.removeBtn,children:"\u2715"}):(0,p.jsx)("button",{type:"button",onClick:()=>{H([{fromHour:"00",fromMinute:"00",fromAmPm:"AM",tillHour:"00",tillMinute:"00",tillAmPm:"AM"}])},className:d.removeBtn,children:"\u2715"}),(0,p.jsxs)("div",{className:d.timeInputGroup,children:[(0,p.jsx)("input",{type:"number",min:"0",max:"11",step:"1",value:e.tillHour,onChange:e=>B(t,"tillHour",e.target.value),className:d.timeInput}),(0,p.jsx)("span",{className:d.twoDots,children:":"}),(0,p.jsx)("input",{type:"number",min:"0",max:"55",step:"1",value:e.tillMinute,onChange:e=>B(t,"tillMinute",e.target.value),className:d.timeInput}),(0,p.jsxs)("select",{value:e.tillAmPm,onChange:e=>B(t,"tillAmPm",e.target.value),className:d.ampmSelect,children:[(0,p.jsx)("option",{value:"AM",children:"AM"}),(0,p.jsx)("option",{value:"PM",children:"PM"})]})]})]},"line-".concat(t)))})]}),(0,p.jsxs)("div",{className:d.addSleepCont,children:[(0,p.jsx)("p",{children:"Add sleep period"}),(0,p.jsx)("button",{onClick:()=>{!w&&(()=>{const e=[...C]||[];e.push({fromHour:"00",fromMinute:"00",fromAmPm:"AM",tillHour:"00",tillMinute:"00",tillAmPm:"AM"}),H(e)})()},type:"button",className:d.addBtn,children:"Add +"}),(1===C.length&&!w||C.length>1)&&(0,p.jsx)("button",{onClick:function(){const e=C.length-1,t=w?C.filter((t,l)=>l!==e):[...C];h((0,c.jY)({date:_,interval:t}))},type:"button",className:d.saveBtn,children:"Save"})]})]}),(0,p.jsxs)("div",{className:d.adviceCont,children:[(0,p.jsx)("h2",{className:d.adviceTitle,children:"Suggestions"}),0!==f?(0,p.jsxs)("p",{className:d.advicep,children:["Try to get at least ",S," hours of sleep ."]}):(0,p.jsxs)("p",{style:{color:"red",background:"var(--Gray5)",textAlign:"left",flexWrap:"wrap",gap:"3px",justifyContent:"flex-start",height:"fit-content",fontSize:"clamp(11px, 2.5vw, 12px)"},className:d.advicep,children:["Personal info missing. Please click",(0,p.jsx)("button",{className:d.navBtn,onClick:()=>t("/"),type:"button",children:"Diet Calculator"})," ","to update !"]})]})]})]})}},379:(e,t,l)=>{function i(e,t,l,i,n,r){const a=Number(String(e).trim()),o=Number(String(t).trim()),s=Number(String(i).trim()),m=Number(String(n).trim()),u=String(l||"").trim().toUpperCase(),c=String(r||"").trim().toUpperCase();if([a,o,s,m].some(Number.isNaN))return 0;let d=a%12;"PM"===u&&(d+=12);let p=s%12;"PM"===c&&(p+=12);let h=60*p+m-(60*d+o);h<0&&(h+=1440);return parseFloat((h/60).toFixed(1))}l.d(t,{A:()=>i})},8772:(e,t,l)=>{function i(e){let t;t=e<14?[9,11]:e<=17?[8,10]:e<=64?[7,9]:[7,8],"high"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"moderate")&&(t=[t[0]+.5,t[1]+1]);const l=t[0];return(t[1]+l)/2}l.d(t,{A:()=>i})},9283:(e,t,l)=>{function i(e){const[t,l,i]=e.split("-").map(Number),n=["Su","Mo","Tu","We","Th","Fr","Sa"][new Date(t,l-1,i).getDay()],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][l-1];return"".concat(n,"-").concat(String(i).padStart(2,"0"),"-").concat(r,"-").concat(t)}l.d(t,{A:()=>i})}}]);
//# sourceMappingURL=31.3f231fd0.chunk.js.map