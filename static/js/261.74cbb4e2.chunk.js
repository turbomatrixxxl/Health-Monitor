"use strict";(self.webpackChunkhealth_monitor=self.webpackChunkhealth_monitor||[]).push([[261],{6261:(e,t,l)=>{l.r(t),l.d(t,{default:()=>d});var i=l(9379),n=l(5043),r=l(1036),o=l(8772);var a=l(9283),s=l(9095),m=l(2952);const u={cont:"SleepPage_cont__oT8Gs",leftSideCont:"SleepPage_leftSideCont__Q3HmQ",rightSideCont:"SleepPage_rightSideCont__ykrwn",title:"SleepPage_title__K9yPp",graphCont:"SleepPage_graphCont__zsvaV",rightSideUpCont:"SleepPage_rightSideUpCont__nUzva",rightSideContTitle:"SleepPage_rightSideContTitle__U5w9+",rightSideDate:"SleepPage_rightSideDate__IODHw",dateWrapper:"SleepPage_dateWrapper__dHRbg",paramInput:"SleepPage_paramInput__iX7O3",fromToCont:"SleepPage_fromToCont__IbmMk",fromToTitle:"SleepPage_fromToTitle__q+7uz",from:"SleepPage_from__oIAUQ",to:"SleepPage_to__4PxPX",rem:"SleepPage_rem__8xRTe",lineRowCont:"SleepPage_lineRowCont__I0Gdh",lineRow:"SleepPage_lineRow__1PnEF",timeInputGroup:"SleepPage_timeInputGroup__JaH6e",removeBtn:"SleepPage_removeBtn__apcvC",dash:"SleepPage_dash__NFLyC",timeInput:"SleepPage_timeInput__p9RMX",twoDots:"SleepPage_twoDots__wLyFl",ampmSelect:"SleepPage_ampmSelect__mwOC4",addSleepCont:"SleepPage_addSleepCont__iDnBy",addBtn:"SleepPage_addBtn__3yzVd",saveBtn:"SleepPage_saveBtn__WPyMK",adviceCont:"SleepPage_adviceCont__JvZ8D"};var c=l(579);const d=function(){var e;const{user:t,privateDispatch:l}=(0,s.d)(),d=0!==(null===t||void 0===t?void 0:t.age)&&0!==(null===t||void 0===t?void 0:t.height)&&0!==(null===t||void 0===t?void 0:t.weight)&&0!==(null===t||void 0===t?void 0:t.desiredWeight),p=null!==(e=null===t||void 0===t?void 0:t.age)&&void 0!==e?e:0,h=(0,n.useMemo)(()=>(null===t||void 0===t?void 0:t.sleep)||[],[null===t||void 0===t?void 0:t.sleep]),g=d?(0,o.A)(p):0,[v,f]=(0,n.useState)((new Date).toISOString().split("T")[0]),S=(0,n.useMemo)(()=>new Date,[]),_="".concat(S.getFullYear(),"-").concat(String(S.getMonth()+1).padStart(2,"0"),"-").concat(String(S.getDate()).padStart(2,"0")),P=v===_,M=(0,n.useMemo)(()=>h.length>0?[...h]:[{date:S,interval:[{fromHour:"00",fromMinute:"00",fromAmPm:"AM",tillHour:"00",tillMinute:"00",tillAmPm:"AM"}]}],[h,S]),N=M.find(e=>new Date(e.date).toISOString().split("T")[0]===v),[x,A]=(0,n.useState)([{fromHour:"00",fromMinute:"00",fromAmPm:"AM",tillHour:"00",tillMinute:"00",tillAmPm:"AM"}]);(0,n.useEffect)(()=>{if(N){const e=[...N.interval].sort((e,t)=>I(e.fromHour,e.fromMinute,e.fromAmPm)-I(t.fromHour,t.fromMinute,t.fromAmPm));A(e)}},[N]),(0,n.useEffect)(()=>{const e=M.find(e=>new Date(e.date).toISOString().split("T")[0]===v);if(e){const t=[...e.interval].sort((e,t)=>I(e.fromHour,e.fromMinute,e.fromAmPm)-I(t.fromHour,t.fromMinute,t.fromAmPm));A(t)}else A([{fromHour:"00",fromMinute:"00",fromAmPm:"AM",tillHour:"00",tillMinute:"00",tillAmPm:"AM"}])},[v,h,M]);const j=null===x||void 0===x?void 0:x.reduce((e,t)=>e+=function(e,t,l,i,n,r){const o=Number(String(e).trim()),a=Number(String(t).trim()),s=Number(String(i).trim()),m=Number(String(n).trim()),u=String(l||"").trim().toUpperCase(),c=String(r||"").trim().toUpperCase();if([o,a,s,m].some(Number.isNaN))return 0;let d=o%12;"PM"===u&&(d+=12);let p=s%12;"PM"===c&&(p+=12);let h=60*p+m-(60*d+a);return h<0&&(h+=1440),parseFloat((h/60).toFixed(1))}(t.fromHour,t.fromMinute,t.fromAmPm,t.tillHour,t.tillMinute,t.tillAmPm),0),C=x[x.length-1],H=(b=C,Number(String(b.fromHour).trim())+Number(String(b.fromMinute).trim())+Number(String(b.tillHour).trim())+Number(String(b.tillMinute).trim())===0&&"AM"===String(b.fromAmPm).trim().toUpperCase()&&"AM"===String(b.tillAmPm).trim().toUpperCase());var b;const y=e=>String(e).padStart(2,"0");function I(e,t,l){let i=parseInt(e,10)%12;return"PM"===l&&(i+=12),60*i+parseInt(t,10)}const w=(e,t,l)=>{let n=parseInt(l,10);["fromHour","tillHour"].includes(t)&&((isNaN(n)||n<0)&&(n=0),n>11&&(n=11),l=y(n)),["fromMinute","tillMinute"].includes(t)&&((isNaN(n)||n<0)&&(n=0),n>59&&(n=59),l=y(n));const o=[...x],a=(0,i.A)((0,i.A)({},o[e]),{},{[t]:l});!function(e,t,l){const i=I(e.fromHour,e.fromMinute,e.fromAmPm),n=I(e.tillHour,e.tillMinute,e.tillAmPm);for(let r=0;r<t.length;r++){if(r===l)continue;const e=t[r],o=I(e.fromHour,e.fromMinute,e.fromAmPm);if(i<I(e.tillHour,e.tillMinute,e.tillAmPm)&&n>o)return!0}return!1}(a,o,e)?(o[e]=a,A(o)):r.oR.error("Intervalele de somn nu trebuie s\u0103 se suprapun\u0103!")};return(0,c.jsxs)("div",{className:u.cont,children:[(0,c.jsxs)("div",{className:u.leftSideCont,children:[(0,c.jsxs)("div",{className:u.rightSideUpCont,children:[(0,c.jsx)("h1",{className:u.title,children:"Sleep statistics"}),(0,c.jsx)("div",{className:u.graphCont,children:"Graphic container"})]}),(0,c.jsxs)("div",{className:u.adviceCont,children:[(0,c.jsx)("h2",{className:u.adviceTitle,children:"Total sleep hours"}),0!==j?(0,c.jsxs)("p",{style:{fontSize:"clamp(11px, 1.5vw, 14px)",color:j<.6*g||j>1.2*g?"red":void 0},className:u.advicep,children:[(0,c.jsxs)("span",{children:["You have ",j," ",1===j?"hour":"hours"," of sleep for"," "]})," ",(0,c.jsx)("span",{style:{marginLeft:"2px"},children:P?"today":(0,a.A)(v)})]}):(0,c.jsxs)("p",{style:{color:"red"},className:u.advicep,children:["No sleep records for"," ",P?"today":(0,a.A)(v)]})]})]}),(0,c.jsxs)("div",{className:u.rightSideCont,children:[(0,c.jsxs)("div",{className:u.rightSideUpCont,children:[(0,c.jsx)("h1",{className:u.title,children:"Add sleep"}),(0,c.jsxs)("div",{className:u.rightSideDate,children:[(0,c.jsx)("div",{className:u.dateWrapper,children:(0,c.jsx)("input",{max:_,type:"date",value:null!==v&&void 0!==v?v:_,onChange:e=>f(e.target.value),className:u.paramInput})}),(0,c.jsx)("p",{className:u.rightSideDateP,children:"Choose date"})]}),(0,c.jsxs)("div",{className:u.fromToCont,children:[(0,c.jsxs)("div",{className:u.fromToTitle,children:[(0,c.jsx)("p",{className:u.from,children:"From"}),(0,c.jsx)("p",{className:u.rem,children:M.length>1?"Delete":"Reset"}),(0,c.jsx)("p",{className:u.to,children:"Till"})]}),(0,c.jsx)("div",{className:u.lineRowCont,children:x.map((e,t)=>(0,c.jsxs)("div",{className:u.lineRow,children:[(0,c.jsxs)("div",{className:u.timeInputGroup,children:[(0,c.jsx)("input",{type:"number",min:"0",max:"11",step:"1",value:e.fromHour,onChange:e=>w(t,"fromHour",e.target.value),className:u.timeInput}),(0,c.jsx)("span",{className:u.twoDots,children:":"}),(0,c.jsx)("input",{type:"number",min:"0",max:"55",step:"1",value:e.fromMinute,onChange:e=>w(t,"fromMinute",e.target.value),className:u.timeInput}),(0,c.jsxs)("select",{value:e.fromAmPm,onChange:e=>w(t,"fromAmPm",e.target.value),className:u.ampmSelect,children:[(0,c.jsx)("option",{value:"AM",children:"AM"}),(0,c.jsx)("option",{value:"PM",children:"PM"})]})]}),x.length>1?(0,c.jsx)("button",{type:"button",onClick:()=>(e=>{const t=x.filter((t,l)=>l!==e);A(t)})(t),className:u.removeBtn,children:"\u2715"}):(0,c.jsx)("button",{type:"button",onClick:()=>{A([{fromHour:"00",fromMinute:"00",fromAmPm:"AM",tillHour:"00",tillMinute:"00",tillAmPm:"AM"}])},className:u.removeBtn,children:"\u2715"}),(0,c.jsxs)("div",{className:u.timeInputGroup,children:[(0,c.jsx)("input",{type:"number",min:"0",max:"11",step:"1",value:e.tillHour,onChange:e=>w(t,"tillHour",e.target.value),className:u.timeInput}),(0,c.jsx)("span",{className:u.twoDots,children:":"}),(0,c.jsx)("input",{type:"number",min:"0",max:"55",step:"1",value:e.tillMinute,onChange:e=>w(t,"tillMinute",e.target.value),className:u.timeInput}),(0,c.jsxs)("select",{value:e.tillAmPm,onChange:e=>w(t,"tillAmPm",e.target.value),className:u.ampmSelect,children:[(0,c.jsx)("option",{value:"AM",children:"AM"}),(0,c.jsx)("option",{value:"PM",children:"PM"})]})]})]},"line-".concat(t)))})]}),(0,c.jsxs)("div",{className:u.addSleepCont,children:[(0,c.jsx)("p",{children:"Add sleep period"}),(0,c.jsx)("button",{onClick:()=>{!H&&(()=>{const e=[...x]||[];e.push({fromHour:"00",fromMinute:"00",fromAmPm:"AM",tillHour:"00",tillMinute:"00",tillAmPm:"AM"}),A(e)})()},type:"button",className:u.addBtn,children:"Add +"}),(1===x.length&&!H||x.length>1)&&(0,c.jsx)("button",{onClick:function(){const e=x.length-1,t=H?x.filter((t,l)=>l!==e):[...x];l((0,m.jY)({date:v,interval:t}))},type:"button",className:u.saveBtn,children:"Save"})]})]}),(0,c.jsxs)("div",{className:u.adviceCont,children:[(0,c.jsx)("h2",{className:u.adviceTitle,children:"Suggestions"}),0!==p?(0,c.jsxs)("p",{className:u.advicep,children:["Try to get at least ",g," hours of sleep ."]}):(0,c.jsx)("p",{style:{color:"red",lineHeight:"inherit"},className:u.advicep,children:"It seems that you did not set up your personal info. Please check Diet Calculator page to set things right !"})]})]})]})}},8772:(e,t,l)=>{function i(e){let t;t=e<14?[9,11]:e<=17?[8,10]:e<=64?[7,9]:[7,8],"high"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"moderate")&&(t=[t[0]+.5,t[1]+1]);const l=t[0];return(t[1]+l)/2}l.d(t,{A:()=>i})},9283:(e,t,l)=>{function i(e){const[t,l,i]=e.split("-").map(Number),n=["Su","Mo","Tu","We","Th","Fr","Sa"][new Date(t,l-1,i).getDay()],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][l-1];return"".concat(n,"-").concat(String(i).padStart(2,"0"),"-").concat(r,"-").concat(t)}l.d(t,{A:()=>i})}}]);
//# sourceMappingURL=261.74cbb4e2.chunk.js.map