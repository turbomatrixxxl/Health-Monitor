"use strict";(self.webpackChunkhealth_monitor=self.webpackChunkhealth_monitor||[]).push([[31],{31:(e,t,l)=>{l.r(t),l.d(t,{default:()=>f});var n=l(9379),a=l(5043),o=l(3216),r=l(1036),i=l(8772),s=l(379),m=l(9283),c=l(856),u=l(9095),d=l(2952),p=l(1648);const g={cont:"SleepPage_cont__oT8Gs",leftSideCont:"SleepPage_leftSideCont__Q3HmQ",rightSideCont:"SleepPage_rightSideCont__ykrwn",rightSideUpCont:"SleepPage_rightSideUpCont__nUzva",title:"SleepPage_title__K9yPp",graphCont:"SleepPage_graphCont__zsvaV",rightSideContTitle:"SleepPage_rightSideContTitle__U5w9+",rightSideDate:"SleepPage_rightSideDate__IODHw",dateWrapper:"SleepPage_dateWrapper__dHRbg",paramInput:"SleepPage_paramInput__iX7O3",fromToCont:"SleepPage_fromToCont__IbmMk",fromToTitle:"SleepPage_fromToTitle__q+7uz",from:"SleepPage_from__oIAUQ",to:"SleepPage_to__4PxPX",rem:"SleepPage_rem__8xRTe",lineRowCont:"SleepPage_lineRowCont__I0Gdh",lineRow:"SleepPage_lineRow__1PnEF",timeInputGroup:"SleepPage_timeInputGroup__JaH6e",removeBtn:"SleepPage_removeBtn__apcvC",dash:"SleepPage_dash__NFLyC",timeInput:"SleepPage_timeInput__p9RMX",twoDots:"SleepPage_twoDots__wLyFl",ampmSelect:"SleepPage_ampmSelect__mwOC4",addSleepCont:"SleepPage_addSleepCont__iDnBy",addBtn:"SleepPage_addBtn__3yzVd",saveBtn:"SleepPage_saveBtn__WPyMK",adviceCont:"SleepPage_adviceCont__JvZ8D",navBtn:"SleepPage_navBtn__y6p-p"};var h=l(579);const f=function(){var e;const t=(0,o.Zp)(),{user:l,privateDispatch:f}=(0,u.d)(),v=0!==(null===l||void 0===l?void 0:l.age)&&0!==(null===l||void 0===l?void 0:l.height)&&0!==(null===l||void 0===l?void 0:l.weight)&&0!==(null===l||void 0===l?void 0:l.desiredWeight),S=null!==(e=null===l||void 0===l?void 0:l.age)&&void 0!==e?e:0,_=(0,a.useMemo)(()=>(null===l||void 0===l?void 0:l.sleep)||[],[null===l||void 0===l?void 0:l.sleep]),x=v?(0,i.A)(S):0,[P,A]=(0,a.useState)((new Date).toISOString().split("T")[0]),M=(0,a.useMemo)(()=>new Date,[]),N="".concat(M.getFullYear(),"-").concat(String(M.getMonth()+1).padStart(2,"0"),"-").concat(String(M.getDate()).padStart(2,"0")),j=P===N,C=(0,a.useMemo)(()=>_.length>0?[..._]:[{date:M,interval:[{fromHour:"00",fromMinute:"00",fromAmPm:"AM",tillHour:"00",tillMinute:"00",tillAmPm:"AM"}]}],[_,M]),y=C.find(e=>new Date(e.date).toISOString().split("T")[0]===P),[D,w]=(0,a.useState)([{fromHour:"00",fromMinute:"00",fromAmPm:"AM",tillHour:"00",tillMinute:"00",tillAmPm:"AM"}]);(0,a.useEffect)(()=>{if(y){const e=[...y.interval].sort((e,t)=>B(e.fromHour,e.fromMinute,e.fromAmPm)-B(t.fromHour,t.fromMinute,t.fromAmPm));w(e)}},[y]),(0,a.useEffect)(()=>{const e=C.find(e=>new Date(e.date).toISOString().split("T")[0]===P);if(e){const t=[...e.interval].sort((e,t)=>B(e.fromHour,e.fromMinute,e.fromAmPm)-B(t.fromHour,t.fromMinute,t.fromAmPm));w(t)}else w([{fromHour:"00",fromMinute:"00",fromAmPm:"AM",tillHour:"00",tillMinute:"00",tillAmPm:"AM"}])},[P,_,C]);const H=null===D||void 0===D?void 0:D.reduce((e,t)=>e+=(0,s.A)(t.fromHour,t.fromMinute,t.fromAmPm,t.tillHour,t.tillMinute,t.tillAmPm),0),b=D[D.length-1],T=(I=b,Number(String(I.fromHour).trim())+Number(String(I.fromMinute).trim())+Number(String(I.tillHour).trim())+Number(String(I.tillMinute).trim())===0&&"AM"===String(I.fromAmPm).trim().toUpperCase()&&"AM"===String(I.tillAmPm).trim().toUpperCase());var I;const k=e=>String(e).padStart(2,"0");function B(e,t,l){let n=parseInt(e,10)%12;return"PM"===l&&(n+=12),60*n+parseInt(t,10)}const U=(e,t,l)=>{let a=parseInt(l,10);["fromHour","tillHour"].includes(t)&&((isNaN(a)||a<0)&&(a=0),a>11&&(a=11),l=k(a)),["fromMinute","tillMinute"].includes(t)&&((isNaN(a)||a<0)&&(a=0),a>59&&(a=59),l=k(a));const o=[...D],i=(0,n.A)((0,n.A)({},o[e]),{},{[t]:l});!function(e,t,l){const n=B(e.fromHour,e.fromMinute,e.fromAmPm),a=B(e.tillHour,e.tillMinute,e.tillAmPm);for(let o=0;o<t.length;o++){if(o===l)continue;const e=t[o],r=B(e.fromHour,e.fromMinute,e.fromAmPm);if(n<B(e.tillHour,e.tillMinute,e.tillAmPm)&&a>r)return!0}return!1}(i,o,e)?(o[e]=i,w(o)):r.oR.error("Intervalele de somn nu trebuie s\u0103 se suprapun\u0103!")},W=(0,c.A)(_,"sleep");return(0,h.jsxs)("div",{className:g.cont,children:[(0,h.jsxs)("div",{className:g.leftSideCont,children:[(0,h.jsxs)("div",{className:g.rightSideUpCont,children:[(0,h.jsx)("h1",{className:g.title,children:"Sleep statistics"}),(0,h.jsx)("div",{className:g.graphCont,children:(0,h.jsx)(p.A,{target:x,weeklyData:W,type:"sleep"})})]}),(0,h.jsxs)("div",{className:g.adviceCont,children:[(0,h.jsx)("h2",{className:g.adviceTitle,children:"Total sleep hours"}),0!==H?(0,h.jsxs)("p",{style:{fontSize:"clamp(11px, 1.5vw, 14px)",color:H<.6*x||H>1.2*x?"red":void 0},className:g.advicep,children:[(0,h.jsxs)("span",{children:["You have ",H," ",1===H?"hour":"hours"," of sleep for"," "]})," ",(0,h.jsx)("span",{style:{marginLeft:"2px"},children:j?"today":(0,m.A)(P)})]}):(0,h.jsxs)("p",{style:{color:"red"},className:g.advicep,children:["No sleep records for"," ",j?"today":(0,m.A)(P)]})]})]}),(0,h.jsxs)("div",{className:g.rightSideCont,children:[(0,h.jsxs)("div",{className:g.rightSideUpCont,children:[(0,h.jsx)("h1",{className:g.title,children:"Add sleep"}),(0,h.jsxs)("div",{className:g.rightSideDate,children:[(0,h.jsx)("div",{className:g.dateWrapper,children:(0,h.jsx)("input",{max:N,type:"date",value:null!==P&&void 0!==P?P:N,onChange:e=>A(e.target.value),className:g.paramInput})}),(0,h.jsx)("p",{className:g.rightSideDateP,children:"Choose date"})]}),(0,h.jsxs)("div",{className:g.fromToCont,children:[(0,h.jsxs)("div",{className:g.fromToTitle,children:[(0,h.jsx)("p",{className:g.from,children:"From"}),(0,h.jsx)("p",{className:g.rem,children:C.length>1?"Delete":"Reset"}),(0,h.jsx)("p",{className:g.to,children:"Till"})]}),(0,h.jsx)("div",{className:g.lineRowCont,children:D.map((e,t)=>(0,h.jsxs)("div",{className:g.lineRow,children:[(0,h.jsxs)("div",{className:g.timeInputGroup,children:[(0,h.jsx)("input",{type:"number",min:"0",max:"11",step:"1",value:e.fromHour,onChange:e=>U(t,"fromHour",e.target.value),className:g.timeInput}),(0,h.jsx)("span",{className:g.twoDots,children:":"}),(0,h.jsx)("input",{type:"number",min:"0",max:"55",step:"1",value:e.fromMinute,onChange:e=>U(t,"fromMinute",e.target.value),className:g.timeInput}),(0,h.jsxs)("select",{value:e.fromAmPm,onChange:e=>U(t,"fromAmPm",e.target.value),className:g.ampmSelect,children:[(0,h.jsx)("option",{value:"AM",children:"AM"}),(0,h.jsx)("option",{value:"PM",children:"PM"})]})]}),D.length>1?(0,h.jsx)("button",{type:"button",onClick:()=>(e=>{const t=D.filter((t,l)=>l!==e);w(t)})(t),className:g.removeBtn,children:"\u2715"}):(0,h.jsx)("button",{type:"button",onClick:()=>{w([{fromHour:"00",fromMinute:"00",fromAmPm:"AM",tillHour:"00",tillMinute:"00",tillAmPm:"AM"}])},className:g.removeBtn,children:"\u2715"}),(0,h.jsxs)("div",{className:g.timeInputGroup,children:[(0,h.jsx)("input",{type:"number",min:"0",max:"11",step:"1",value:e.tillHour,onChange:e=>U(t,"tillHour",e.target.value),className:g.timeInput}),(0,h.jsx)("span",{className:g.twoDots,children:":"}),(0,h.jsx)("input",{type:"number",min:"0",max:"55",step:"1",value:e.tillMinute,onChange:e=>U(t,"tillMinute",e.target.value),className:g.timeInput}),(0,h.jsxs)("select",{value:e.tillAmPm,onChange:e=>U(t,"tillAmPm",e.target.value),className:g.ampmSelect,children:[(0,h.jsx)("option",{value:"AM",children:"AM"}),(0,h.jsx)("option",{value:"PM",children:"PM"})]})]})]},"line-".concat(t)))})]}),(0,h.jsxs)("div",{className:g.addSleepCont,children:[(0,h.jsx)("p",{children:"Add sleep period"}),(0,h.jsx)("button",{onClick:()=>{!T&&(()=>{const e=[...D]||[];e.push({fromHour:"00",fromMinute:"00",fromAmPm:"AM",tillHour:"00",tillMinute:"00",tillAmPm:"AM"}),w(e)})()},type:"button",className:g.addBtn,children:"Add +"}),(1===D.length&&!T||D.length>1)&&(0,h.jsx)("button",{onClick:function(){const e=D.length-1,t=T?D.filter((t,l)=>l!==e):[...D];f((0,d.jY)({date:P,interval:t}))},type:"button",className:g.saveBtn,children:"Save"})]})]}),(0,h.jsxs)("div",{className:g.adviceCont,children:[(0,h.jsx)("h2",{className:g.adviceTitle,children:"Suggestions"}),0!==S?(0,h.jsxs)("p",{className:g.advicep,children:["Try to get at least ",x," hours of sleep ."]}):(0,h.jsxs)("p",{style:{color:"red",background:"var(--Gray5)",textAlign:"left",flexWrap:"wrap",gap:"3px",justifyContent:"flex-start",height:"fit-content",fontSize:"clamp(11px, 2.5vw, 12px)"},className:g.advicep,children:["Personal info missing. Please click",(0,h.jsx)("button",{className:g.navBtn,onClick:()=>t("/"),type:"button",children:"Diet Calculator"})," ","to update !"]})]})]})]})}},379:(e,t,l)=>{function n(e,t,l,n,a,o){const r=Number(String(e).trim()),i=Number(String(t).trim()),s=Number(String(n).trim()),m=Number(String(a).trim()),c=String(l||"").trim().toUpperCase(),u=String(o||"").trim().toUpperCase();if([r,i,s,m].some(Number.isNaN))return 0;let d=r%12;"PM"===c&&(d+=12);let p=s%12;"PM"===u&&(p+=12);let g=60*p+m-(60*d+i);g<0&&(g+=1440);return parseFloat((g/60).toFixed(1))}l.d(t,{A:()=>n})},856:(e,t,l)=>{l.d(t,{A:()=>a});var n=l(379);function a(e,t){const l=new Date,a=l.getDay(),o=0===a?-6:1-a,r=new Date(l);r.setDate(l.getDate()+o),console.log("date.getDate() :",l.getDate()),r.setHours(0,0,0,0),console.log("startOfTheWeek :",r);const i=[];for(let m=0;m<7;m++){const l=new Date(r);l.setDate(r.getDate()+m),console.log("currentDay:",l),console.log("startOfTheWeek.getDate() :",r.getDate()),console.log("currentDay.toDateString() :",l.toDateString());const a=e.find(e=>new Date(e.date).toDateString()===l.toDateString());if("steps"===t){const e=a?null===a||void 0===a?void 0:a.interval.reduce((e,t)=>e+t.steps,0):0;i.push({day:l.toLocaleDateString("en-US",{weekday:"short"}),total:e})}else{var s;const e=a?null===a||void 0===a||null===(s=a.interval)||void 0===s?void 0:s.reduce((e,t)=>e+=(0,n.A)(t.fromHour,t.fromMinute,t.fromAmPm,t.tillHour,t.tillMinute,t.tillAmPm),0):0;i.push({day:l.toLocaleDateString("en-US",{weekday:"short"}),total:e})}}return i}},1648:(e,t,l)=>{l.d(t,{A:()=>p});l(5043);var n=l(108),a=l(1474),o=l(7734),r=l(2185),i=l(6026),s=l(3670),m=l(1175),c=l(7869);const u="WeeklyChart_barChart__AHVA8";var d=l(579);const p=function(e){let{weeklyData:t,type:l,target:p}=e;return(0,d.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,d.jsx)(n.u,{width:"100%",children:(0,d.jsxs)(a.E,{data:t,margin:{top:15,right:15,left:"steps"===l?-10:-25,bottom:5},className:u,children:[(0,d.jsx)(o.d,{strokeDasharray:"3 3"}),(0,d.jsx)(r.W,{dataKey:"day"}),(0,d.jsx)(i.h,{}),(0,d.jsx)(s.m,{contentStyle:{color:"var(--brand-color)",fontWeight:"700"}}),(0,d.jsx)(m.y,{dataKey:"total",radius:[6,6,0,0],children:t.map((e,t)=>{const n="sleep"===l&&(e.total<.6*p||e.total>p+1)||"steps"===l&&e.total<.6*p?"red":"steps"===l&&e.total>=.6*p&&"steps"===l&&e.total<=.8*p?"var(--brand-color)":"#4cafef";return(0,d.jsx)(c.f,{fill:n},"cell-".concat(t))})})]})})})}},8772:(e,t,l)=>{function n(e){let t;t=e<14?[9,11]:e<=17?[8,10]:e<=64?[7,9]:[7,8],"high"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"moderate")&&(t=[t[0]+.5,t[1]+1]);const l=t[0];return(t[1]+l)/2}l.d(t,{A:()=>n})},9283:(e,t,l)=>{function n(e){const[t,l,n]=e.split("-").map(Number),a=["Su","Mo","Tu","We","Th","Fr","Sa"][new Date(t,l-1,n).getDay()],o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][l-1];return"".concat(a,"-").concat(String(n).padStart(2,"0"),"-").concat(o,"-").concat(t)}l.d(t,{A:()=>n})}}]);
//# sourceMappingURL=31.b6ff405f.chunk.js.map